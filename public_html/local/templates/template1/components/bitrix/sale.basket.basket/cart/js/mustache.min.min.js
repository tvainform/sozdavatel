/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 *
 * Copyright (c) 2009 Chris Wanstrath (Ruby)
 * Copyright (c) 2010-2014 Jan Lehnardt (JavaScript)
 * Copyright (c) 2010-2015 The mustache.js community
 *
 * Licensed under MIT (https://github.com/janl/mustache.js/blob/master/LICENSE)
 */
(function defineMustache(c,d){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){d(exports)}else{if(typeof define==="function"&&define.amd){define(["exports"],d)}else{c.Mustache={};d(c.Mustache)}}}(this,function mustacheFactory(aa){var ai=Object.prototype.toString;var ah=Array.isArray||function aD(a){return ai.call(a)==="[object Array]"};function al(a){return typeof a==="function"}function U(a){return ah(a)?"array":typeof a}function ay(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function W(a,b){return a!=null&&typeof a==="object"&&(b in a)}var ar=RegExp.prototype.test;function aE(a,b){return ar.call(a,b)}var an=/\S/;function ab(a){return !aE(an,a)}var ap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function ag(b){return String(b).replace(/[&<>"'`=\/]/g,function a(c){return ap[c]})}var am=/\s*/;var ad=/\s+/;var av=/\s*=/;var S=/\s*\}/;var ao=/#|\^|\/|>|\{|&|=|!/;function aC(l,b){if(!l){return[]}var u=[];var a=[];var e=[];var k=false;var n=false;function o(){if(k&&!n){while(e.length){delete a[e.pop()]}}else{e=[]}k=false;n=false}var s,c,m;function d(v){if(typeof v==="string"){v=v.split(ad,2)}if(!ah(v)||v.length!==2){throw new Error("Invalid tags: "+v)}s=new RegExp(ay(v[0])+"\\s*");c=new RegExp("\\s*"+ay(v[1]));m=new RegExp("\\s*"+ay("}"+v[1]))}d(b||aa.tags);var h=new aG(l);var g,i,t,q,f,j;while(!h.eos()){g=h.pos;t=h.scanUntil(s);if(t){for(var p=0,r=t.length;p<r;++p){q=t.charAt(p);if(ab(q)){e.push(a.length)}else{n=true}a.push(["text",q,g,g+1]);g+=1;if(q==="\n"){o()}}}if(!h.scan(s)){break}k=true;i=h.scan(ao)||"name";h.scan(am);if(i==="="){t=h.scanUntil(av);h.scan(av);h.scanUntil(c)}else{if(i==="{"){t=h.scanUntil(m);h.scan(S);h.scanUntil(c);i="&"}else{t=h.scanUntil(c)}}if(!h.scan(c)){throw new Error("Unclosed tag at "+h.pos)}f=[i,t,g,h.pos];a.push(f);if(i==="#"||i==="^"){u.push(f)}else{if(i==="/"){j=u.pop();if(!j){throw new Error('Unopened section "'+t+'" at '+g)}if(j[1]!==t){throw new Error('Unclosed section "'+j[1]+'" at '+g)}}else{if(i==="name"||i==="{"||i==="&"){n=true}else{if(i==="="){d(t)}}}}}j=u.pop();if(j){throw new Error('Unclosed section "'+j[1]+'" at '+h.pos)}return au(aq(a))}function aq(a){var e=[];var c,f;for(var d=0,b=a.length;d<b;++d){c=a[d];if(c){if(c[0]==="text"&&f&&f[0]==="text"){f[1]+=c[1];f[3]=c[3]}else{e.push(c);f=c}}}return e}function au(b){var h=[];var c=h;var a=[];var f,d;for(var g=0,e=b.length;g<e;++g){f=b[g];switch(f[0]){case"#":case"^":c.push(f);a.push(f);c=f[4]=[];break;case"/":d=a.pop();d[5]=f[2];c=a.length>0?a[a.length-1][4]:h;break;default:c.push(f)}}return h}function aG(a){this.string=a;this.tail=a;this.pos=0}aG.prototype.eos=function V(){return this.tail===""};aG.prototype.scan=function R(a){var b=this.tail.match(a);if(!b||b.index!==0){return""}var c=b[0];this.tail=this.tail.substring(c.length);this.pos+=c.length;return c};aG.prototype.scanUntil=function X(a){var b=this.tail.search(a),c;switch(b){case -1:c=this.tail;this.tail="";break;case 0:c="";break;default:c=this.tail.substring(0,b);this.tail=this.tail.substring(b)}this.pos+=c.length;return c};function T(a,b){this.view=a;this.cache={".":this.view};this.parent=b}T.prototype.push=function Z(a){return new T(a,this)};T.prototype.lookup=function ax(d){var f=this.cache;var b;if(f.hasOwnProperty(d)){b=f[d]}else{var c=this,a,e,g=false;while(c){if(d.indexOf(".")>0){b=c.view;a=d.split(".");e=0;while(b!=null&&e<a.length){if(e===a.length-1){g=W(b,a[e])}b=b[a[e++]]}}else{b=c.view[d];g=W(c.view,d)}if(g){break}c=c.parent}f[d]=b}if(al(b)){b=b.call(this.view)}return b};function aw(){this.cache={}}aw.prototype.clearCache=function af(){this.cache={}};aw.prototype.parse=function ak(b,c){var d=this.cache;var a=d[b];if(a==null){a=d[b+":"+(c||aa.tags).join(":")]=aC(b,c)}return a};aw.prototype.render=function ae(b,e,c){var a=this.parse(b);var d=(e instanceof T)?e:new T(e);return this.renderTokens(a,d,c,b)};aw.prototype.renderTokens=function at(c,j,e,a){var g="";var h,i,b;for(var f=0,d=c.length;f<d;++f){b=undefined;h=c[f];i=h[0];if(i==="#"){b=this.renderSection(h,j,e,a)}else{if(i==="^"){b=this.renderInverted(h,j,e,a)}else{if(i===">"){b=this.renderPartial(h,j,e,a)}else{if(i==="&"){b=this.unescapedValue(h,j)}else{if(i==="name"){b=this.escapedValue(h,j)}else{if(i==="text"){b=this.rawValue(h)}}}}}}if(b!==undefined){g+=b}}return g};aw.prototype.renderSection=function aj(h,j,e,b){var a=this;var f="";var d=j.lookup(h[1]);function i(k){return a.render(k,j,e)}if(!d){return}if(ah(d)){for(var g=0,c=d.length;g<c;++g){f+=this.renderTokens(h[4],j.push(d[g]),e,b)}}else{if(typeof d==="object"||typeof d==="string"||typeof d==="number"){f+=this.renderTokens(h[4],j.push(d),e,b)}else{if(al(d)){if(typeof b!=="string"){throw new Error("Cannot use higher-order sections without the original template")}d=d.call(j.view,b.slice(h[3],h[5]),i);if(d!=null){f+=d}}else{f+=this.renderTokens(h[4],j,e,b)}}}return f};aw.prototype.renderInverted=function aF(c,d,e,a){var b=d.lookup(c[1]);if(!b||(ah(b)&&b.length===0)){return this.renderTokens(c[4],d,e,a)}};aw.prototype.renderPartial=function Y(b,c,d){if(!d){return}var a=al(d)?d(b[1]):d[b[1]];if(a!=null){return this.renderTokens(this.parse(a),c,d,a)}};aw.prototype.unescapedValue=function aA(b,c){var a=c.lookup(b[1]);if(a!=null){return a}};aw.prototype.escapedValue=function ac(b,c){var a=c.lookup(b[1]);if(a!=null){return aa.escape(a)}};aw.prototype.rawValue=function aB(a){return a[1]};aa.name="mustache.js";aa.version="2.3.0";aa.tags=["{{","}}"];var Q=new aw();aa.clearCache=function af(){return Q.clearCache()};aa.parse=function ak(a,b){return Q.parse(a,b)};aa.render=function ae(a,c,b){if(typeof a!=="string"){throw new TypeError('Invalid template! Template should be a "string" but "'+U(a)+'" was given as the first argument for mustache#render(template, view, partials)')}return Q.render(a,c,b)};aa.to_html=function az(b,d,c,a){var e=aa.render(b,d,c);if(al(a)){a(e)}else{return e}};aa.escape=ag;aa.Scanner=aG;aa.Context=T;aa.Writer=aw;return aa}));